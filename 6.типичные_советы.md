# Типичные советы

Здесь собираются типичные советы. Нумерация - в порядке появления, отдельная в каждой теме (Общее, CSS, SVG, Canvas, WebGL). В начале совета - палец. Советы дополняют ревью, но не являются основанием для отправки задания на доработку, если все работает так, как и должно. Это делается, чтобы не сильно демотивировать студентов - ошибки, описываемые здесь, можно поправить позже (особенно если студент приходит к одному наставнику и есть возможность следить за процессом). Про соответствие базовым критериям см. `4.базовые_критерии`.

Советы, добавляемые сюда, должны быть универсальными, не связанными с личным видением проверяющих. Например использование только составных свойств в CSS или только отдельных - это вопрос личных взглядов и соглашений, а вот легкое несоответствие кода концепции БЭМ - это штука универсальная, можно дать совет по теме (до мелочей не докапываемся, за несоответствие Б7 их не считаем, т.к. сама изначальная верстка БЭМу не соответствует).


## Общее

:point_up: - Старайтесь поменьше копипастить код откуда бы то ни было. По крайней мере перечитывайте то, что копипастите. Очень распространенный пример из практики - люди копипастят концепт с CodePen, а потом выясняется, что можно половину кода из него выбросить без потери функционала, да еще и с увеличением производительности. Это не говоря уже о том, что просто понимать, что происходит в проекте, полезно.



## CSS

### №1

:point_up: - Анимации вроде fadeIn, fadeOut, fadeInLeft и.т.д. - универсальные, их можно переиспользовать с разными элементами. Они логически не привязаны к какому-то конкретному элементу. Обычно такие анимации выносят в отдельный файл. Это упрощает поддержку кода - мы сразу знаем, где они лежат.


### №2

:point_up: - Довольно много ошибок. Кажется, что вы забыли посмотреть видео концепт, в котором поясняется, как именно должны выглядеть те или иные анимации на странице. Посмотрите его внимательно и постарайтесь повторить логику происходящего в нем.


### №3

:point_up: - Имеет смысл явно писать в каждом фрейме все свойства, которые меняются в анимации. Это делает происходящее боле понятным и избавляет от некоторых редких багов в IE/Edge.


### №4

:point_up: - При разработке подобных сайтов всегда сделите, чтобы у вас в переходах между секциями не просвечивали куски других секций. Это убережет от поиска некоторых редких багов с канвасом, который может быть (а в нашем случае точно будет) на этих секциях в IE/Edge и Safari.


### №5

:point_up: - Такого рода длинные строки можно разбивать на несколько, чтобы одинаковые сущности были друг над другом. Будет проще читать код.


### №6

:point_up: - Весь макет сверстан в единицах rem, которые привязаны к размеру экрана. Фиксированные значения в px могут разойтись с ними и привести к багам или странным движениям на определенных размерах экрана. Лучше продолжать использовать rem.


### №7 (к задаче про переходы между экранами)

:point_up: - Эта задача встречается очень часто, на нее стоит обратить внимание. Возможно будет удобно добавить немного JS, чтобы секцию со слайдером не сразу убирать, а с небольшой задержкой.


### №8

:point_up: -  Вы движетесь в правильном направлении, но нужно быть внимательнее к деталям. В анимировании это очень важно. И лучше сразу привыкнуть к тому, что все движения в анимации должны быть сделаны в полном объеме. Если вы немного не попали по времени или кривую Безье не ту взяли - это можно поправить за пару секунд, а вот недостающие состояния элементов, несоответствие форм элементов или не те принципы движения элементов оставляют задачу недоделанной. Этого в практической работе следует избегать.


### №9

:point_up: - С точки зрения производительности лучше избегать анимирования свойств вроде height или width, отдавая предпочтение свойству `transform`. Хорошая табличка по теме - [csstriggers](https://csstriggers.com/).


### №10

:point_up: - Для решения задачи анимирования "туда-сюда" можно использовать кривую Безье, которая немного выходит за пределы квадрата 1 на 1. Современные браузеры уже умеют такое делать. Как пример - [cubic-bezier.com/#.6,-0.25,.34,1.51](https://cubic-bezier.com/#.6,-0.25,.34,1.51) . Это позволит делать более плавные движения.

:point_up: - А еще стоит взять на вооружение тот факт, что в каждом фрейме можно задать свою timing-function. Это еще один путь к созданию плавных анимаций. Как пример - [codepen.io/sfi0zy/pen/ZNJWzx](https://codepen.io/sfi0zy/pen/ZNJWzx)


### №11

:point_up: - В практической работе для нас важно не буквально воспринимать слова дизайнера, а еще и думать о том, как это по идее должно работать. Часто дизайнер описывает что-то общими словами, скорее даже бытовыми, которые не нужно воспринимать буквально - мы должны смотреть на мир глазами верстальщика. Либо он может что-то пропустить, и наша задача, как профессионалов - всегда все пропущенное замечать и отправлять соответствующие вопросы дизайнеру, потому что если мы что-то не проверим, то уже никто не проверит.


### №12

:point_up: - Не совсем понятно, зачем здесь использовать подход с подчеркиваниями. Обычно его используют, чтобы разделить "как бы приватные" и "как бы публичные" свойства и методы класса, но здесь они все получаются с подчеркиваниями. Это нагружает код, но пользы не приносит. Да и в остальной части проекта этот подход вроде бы не используется, чтобы ему соответствовать.


### №13

:point_up: - Повторяющиеся значения времени или кривых для анимаций можно вынести в константы (раз уж препроцессор уже есть, то почему бы не использовать его возможности). На практике часто в проектах будет дополнение к стайлгайду, где будет список стандартных значений для анимаций - время для короткой, средней и длинной, кривые по умолчанию и.т.д.


### #14

:point_up: - При работе с CSS анимациями важно следить за тем, чтобы они не ломали верстку вокруг себя.


## SVG

### №1

:point_up: - Свойство transform-origin в CSS не соответствует логическому "transform origin" в SVG. Разные браузеры могут вести себя по-разному при работе с этим свойством. Там долгая история, советую почитать [годную статью по теме](https://css-tricks.com/transforms-on-svg-elements/).


### №2

:point_up: - Обратите внимание, что значения больше 1 в keySplines не поддерживаются в некоторых современных браузерах (даже в вечнозеленых).


### №3 (связан с критерием оценки Б5)

:point_up: - При работе с SVG очень важно обращать внимание на кроссбраузерность. Даже современные браузеры имеют разные взгляды на то, как это все должно работать. Особенное внимание стоит уделить Firefox - в нем вы быстро найдете все основные проблемы, которые есть в вашем коде.


### №4

:point_up: - Обратите внимание, что при перезагрузке страницы SMIL анимации из сторонних картинок не перезапускаются в полном объеме. Это связано с кешированием в браузерах. Загуглите эту тему и постарайтесь решить эту проблему.



## Canvas + Покадровые анимации

### №1

:point_up: - Обратите внимание, что левый край таймера, где цифры почти не меняются, дергается влево-вправо. Такого быть не должно. Это происходит потому, что шрифт не моноширинный. Вероятно текст в таймере нужно выравнивать влево.

:point_up: - Если неизменяемый объект в анимации дергается - это всегда режет глаз. Часто можно это сгладить, зафиксировав его положение, и позволив дергаться изменяемым объектам. То же относится и к плавным перемещениям - если какой-то объект является "центром масс" анимации и стоит на месте - он должен стоять на месте, а не колебаться туда-сюда.


### №2 (связан с критерием оценки Б27)

:point_up: - Критерии оценки - это формальность. Для нас здесь важно научиться ограничивать нагрузку на железо там, где она не нужна. Это одна из важнейших вещей, на которые нужно обращать внимание при работе с анимациями во фронтенде.


## WebGL

### №1

:point_up: - Стандартные инструменты разработчика, например FPS-meter в Chrome, могут сильно привирать при работе с канвасом. По их показаниям может казаться, что все хорошо, но глазами видно, что это не так. Или наоборот - все работает хорошо, а инструмент говорит, что все плохо. Здесь все так же, как и с PageSpeed Insights, если вы понимаете, о чем я. В качестве альтернативы можно сделать какое-нибудь свое решение или взять [stats.js](https://github.com/mrdoob/stats.js/). Кажется, что это самый популярный инструмент для этого среди разработчиков, связанных с Three.js.

:point_up: - У вас в критерии Б1 говорится, что анимация должна быть сделана без сторонних библиотек, но здесь речь именно про отладку, это можно потом убрать перед защитой.


### №2

:point_up: - Написание шейдеров в шаблонных строках - решение не самое удобное. В первую очередь из-за потери подсветки синтаксиса и смешения всего в одну кучу. Альтернативно можно хранить код шейдеров в HTML, как в [этом примере](https://codepen.io/sfi0zy/pen/dyMwreR). Это может быть неплохим вариантом для небольших демок или еще чего-то, что должно работать без системы сборки. Но самый универсальный подход - хранить код шейдеров в отдельных файлах и подставлять их содержимое в JS-скрипты при сборке с помощью плагинов для webpack или других сборщиков - там много вариантов на любой вкус и цвет.


### №3

:point_up: - Для расширения кругозора можно познакомиться с еще одним решением этой задачи: если нужно сгенерировать текстуру и при этом воспользоваться стандартными свойствами материалов из Three.js (тени, блики и.т.д.), то можно все нарисовать на отдельном канвасе и использовать его как текстуру. А еще так можно выводить видео на поверхность модели.

