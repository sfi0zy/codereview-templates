# Типичные советы по CSS

Здесь собираются типичные советы по CSS. Нумерация - в порядке появления. В начале совета - палец. Советы дополняют ревью, но не являются основанием для отправки задания на доработку, если все работает так, как и должно. Это делается, чтобы не сильно демотивировать студентов - ошибки, описываемые здесь, можно поправить позже (особенно если студент приходит к одному наставнику и есть возможность следить за процессом). Про соответствие базовым критериям см. `4.базовые_критерии`.


### №1 (про fadeIn, fadeOut и.т.д.)

:point_up: - Анимации вроде fadeIn, fadeOut, fadeInLeft и.т.д. - универсальные, их можно переиспользовать с разными элементами. Они логически не привязаны к какому-то конкретному элементу. Обычно такие анимации выносят в отдельный файл. Это упрощает поддержку кода - мы сразу знаем, где они лежат, и не дублируем их по всему проекту.


### №2 (про видео-концепт)

:point_up: - Довольно много ошибок. Кажется, что вы забыли посмотреть видео концепт, в котором поясняется, как именно должны выглядеть те или иные анимации на странице. Посмотрите его внимательно и постарайтесь повторить логику происходящего в нем.


### №3 (про баги IE в неполных keyframes)

:point_up: - Имеет смысл явно писать в каждом фрейме все свойства, которые меняются в анимации. Это делает происходящее боле понятным и избавляет от некоторых редких багов в IE/Edge.


### №4 (про баги при переходах между экранами)

:point_up: - При разработке подобных сайтов всегда сделите, чтобы у вас в переходах между секциями не просвечивали куски других секций. Это убережет от поиска некоторых редких багов с канвасом, который может быть (а в нашем случае точно будет) на этих секциях в IE/Edge и Safari.


### №5 (про длинные строки)

:point_up: - Такого рода длинные строки можно разбивать на несколько, чтобы одинаковые сущности были друг над другом. Будет проще бегло читать код.


### №6 (про REM)

:point_up: - Весь макет сверстан в единицах rem, которые привязаны к размеру экрана. Фиксированные значения в px могут разойтись с ними и привести к багам или странным движениям на определенных размерах экрана. Лучше продолжать использовать rem.

:point_up: - Если вы раньше не сталкивались с версткой на плавающих размерах шрифта и с CSS-шлюзами, то будет полезно познакомиться с [хорошей статьей](https://www.smashingmagazine.com/2016/05/fluid-typography/) по теме.


### №7 (про переходы между экранами, УСТАРЕЛ, заменен подробным сообщением в чеклисте)

~~:point_up: - Эта задача встречается очень часто, на нее стоит обратить внимание. Возможно будет удобно добавить немного JS, чтобы секцию со слайдером не сразу убирать, а с небольшой задержкой.~~


### №8 (про детали в анимациях)

:point_up: -  Вы движетесь в правильном направлении, но нужно быть внимательнее к деталям. В анимировании это очень важно. И лучше сразу привыкнуть к тому, что все движения в анимации должны быть сделаны в полном объеме. Если вы немного не попали по времени или кривую Безье не ту взяли - это можно оперативно поправить, а вот недостающие состояния элементов, несоответствие форм элементов или не те принципы движения элементов оставляют задачу недоделанной. Этого в практической работе следует избегать.


### №9 (про производительность transform)

:point_up: - С точки зрения производительности лучше отдавать предпочтение свойству `transform`. Более подробно тема производительности в CSS разбирается во втором модуле учебника, но если в двух словах, то лучше все, что есть, анимировать меняя свойства `transform` и `opacity`. Не всегда решение очевидно с первого взгляда, но это вопросы больше из области верстки, а не анимаций.

:point_up: - Может быть полезно завести себе в привычку сразу верстать разные состояния компонентов интерфейса так, чтобы там менялись только эти свойства, или по крайней мере стремиться к этому. Главный подводный камень тут в том, что проблемы с производительностью, заложенные в таких анимациях, имеют накопительный эффект. Чем больше анимаций и чем больше страница - тем сильнее они будут проявляться. И не всегда можно заранее предсказать, где те или иные компоненты будут использоваться и в каких количествах. В результате может получиться пожар из разряда тех, что проще предотвратить, чем потушить.

:point_up: - Схожий эффект может дать постоянное залезание в DOM из скриптов и совершение операций, которые вызывают перерисовку страницы в той или иной степени. Там тоже легко закрыть на это глаза на простой странице, но по мере роста проекта проблемы с производительностью будут усугубляться.


### №10 (про туда-сюда)

:point_up: - Для решения задачи анимирования "туда-сюда" можно использовать кривую Безье, которая немного выходит за пределы квадрата 1 на 1. Современные браузеры уже умеют такое делать. Как пример - [cubic-bezier.com/#.6,-0.25,.34,1.51](https://cubic-bezier.com/#.6,-0.25,.34,1.51) . Это позволит делать более плавные движения.

:point_up: - А еще стоит взять на вооружение тот факт, что в каждом фрейме можно задать свою timing-function. Это еще один путь к созданию плавных анимаций. Как пример - [codepen.io/sfi0zy/pen/ZNJWzx](https://codepen.io/sfi0zy/pen/ZNJWzx)


### №11 (про ошибки дизайнера)

:point_up: - В практической работе для нас важно не буквально воспринимать слова дизайнера, а еще и думать о том, как это по идее должно работать. Часто дизайнер описывает что-то общими словами, скорее даже бытовыми, которые не нужно воспринимать буквально - мы должны смотреть на мир глазами верстальщика. Либо он может что-то пропустить, и наша задача, как профессионалов - всегда все пропущенное замечать и отправлять соответствующие вопросы дизайнеру, потому что если мы что-то не проверим, то уже никто не проверит.


### №12 (про подчеркивания, УСТАРЕЛ)

~~:point_up: - Не совсем понятно, зачем здесь использовать подход с подчеркиваниями. Обычно его используют, чтобы разделить "как бы приватные" и "как бы публичные" свойства и методы класса, но здесь они все получаются с подчеркиваниями. Это нагружает код, но пользы не приносит. Да и в остальной части проекта этот подход вроде бы не используется, чтобы ему соответствовать.~~


### №13 (про константы в дизайн-системе)

:point_up: - Повторяющиеся значения времени или кривых для анимаций можно вынести в константы (раз уж препроцессор уже есть, то почему бы не использовать его возможности). На практике часто в проектах будет дополнение к дизайн-системе, где будет список стандартных значений для анимаций - время для короткой, средней и длинной, кривые по умолчанию и.т.д.


### №14 (про анимации в контексте страницы)

:point_up: - При работе с CSS анимациями важно следить за тем, чтобы они не ломали верстку вокруг себя.


### №15 (про левые пробелы)

:point_up: - В таких скриптах часто практичнее разбивать все регулярным выражением, а не вот так, особенно если контент делает кто-то "не в теме" и может воткнуть странные пробелы, табы, переносы строк, и.т.д.


### №16 (про глаголы в названиях действий)

:point_up: - Будет хорошей идеей использовать глаголы в названиях анимаций, чтобы подчеркнуть действия, которые в них происходят (мы то же самое делаем в скриптах для функций). Это очень поможет с восприятием кода, когда анимаций станет на самом деле много.


### №17 (про общепринятые названия)

:point_up: - Для таких анимаций есть общепринятые названия вроде fadeIn, fadeOut, fadeInLeft, fadeInRight и.т.д. Есть популярная библиотека [animate.css](https://animate.style/) в которой они все собраны. Если вы будете придерживаться этих названий - ваш код будет проще понимать вашим коллегам, не нужно будет думать, что делает та или иная анимация.

[ + СОВЕТ CSS 1 ]


### №18 (про полноту keyframes, к критерию Б21)

:point_up: - Это упрощает понимание происходящего, когда анимаций становится действительно много и требуется отладка. Нет нужды ходить каждый раз, искать, где же анимация применяется, и высматривать там ее составляющие. А еще эти составляющие порой разные в разных компонентах оказываются, и от такой невнимательности может начинаться магия. Когда все в одном месте - думать проще, ошибок меньше.


### №19 (про Locomotive Scroll)

:point_up: - По теме CSS-анимаций будет полезно дополнительно познакомиться с библиотекой [Locomotive Scroll](https://locomotivemtl.github.io/locomotive-scroll/), если вы еще не знакомы. В учебном проекте все нужно делать без использования сторонних библиотек, но для собственного развития - будет полезно.


### №20 (про Barba.js)

:point_up: - По теме плавных переходов между экранами будет полезно дополнительно познакомиться с библиотекой [Barba.js](https://barba.js.org/), если вы еще не знакомы. В учебном проекте все нужно делать без использования сторонних библиотек, но для собственного развития - будет полезно.


### №21 (про переходы между экранами)

:point_up: - Поскольку задача сделать плавные переходы довольно распространенная, будет полезно подумать о том, как строится логика таких переходов. Какие логические состояния есть у компонента "экран"? Сколько их? 1? 2? 4? Больше? Переход между экранами - это событие? Или может быть это растянутый во времени процесс с событиями начала и конца? Можем ли мы быть уверены в длительности этого процесса? А если экраны - это буквально разные страницы, которые подгружаются в процессе? Как стоило бы организовать модуль, который переключает экраны, чтобы было удобно завязать на него все наши анимации появления и исчезания компонентов интерфейса?


### №22 (мысли на подумать, про промышленный дизайн)

:point_up: - Мысли за рамками учебника на подумать: получение длительностей и угадывание временных функций из видео – в некоторой степени сомнительная затея. В рамках учебного курса, как упражнение - ок. Но в реальной работе – не забывайте, что там, где есть детальный видео-концепт – есть и дизайнер с его исходниками. В исходниках все есть. Даже если мы попали в ситуацию отсутствия у нас нужного софта – банальные скриншоты проекта от дизайнера, где будет видно, что происходит, сэкономят общее время при разработке.

:point_up: - Если все же возникает желаение смотреть видео по кадрам, то это может быть куда удобнее делать в программах, предназначенных для редактирования видео. Будет нужен самый базовый функционал редактора, так что обилие кнопочек не должно пугать. Примерно так оно будет выглядеть (на скриншоте - [Blender](https://www.blender.org/)):

![](https://habrastorage.org/webt/4u/k2/un/4uk2unlgk1bnptzui0qnts3nfpo.jpeg)

:point_up: - Не менее частая ситуация (в мире фриланса – 9 из 10 проектов по субъективным ощущениям) – дизайнер не будет уметь работать с софтом для анимаций, и мы будем попадать в ситуацию, когда нужно все делать самому. Максимум – будут текстовые описания анимаций. Это определенная свобода для самовыражения, но и ответственность тоже. Поэтому важно развивать в себе насмотренность, чтобы здраво оценивать свои собственные творения.

:point_up: - Ну и еще вещь, про которую определенно стоит помнить вне зависимости от обстоятельств: дизайн интерфейсов – это больше промышленный дизайн, чем искусство. Все должно быть по возможности унифицировано для уменьшения издержек на производстве. Если анимации имеют разную длительность – это должно быть логически обосновано. Если разные временные функции – тоже. Как рабочему в мастерской не придет в голову собирать стеллаж на 20 разных видах шурупов, так и нам не нужно плодить сущности без потребности. Система в голове, в дизайне, и в коде – один из доступных способов сделать работу комфортной, и уменьшить количество издержек, как технических, так и организационных. Ну и если рассматривать анимации как часть дизайн-системы, влияющей на узнаваемость бренда – это тоже важно.


### №23 (мысли на подумать, про процессы разработки)

:point_up: - Мысли на подумать: у вас в учебнике затрагивается тема прогрессивного улучшения и деградации. Но тут стоит отметить, что в контексте разработки рекламных сайтов, или просто каких-то штук, где много всего происходит в визуальном плане, сами процессы разработки не стоит завязывать на эти понятия. Если начать с верстки, а WebGL оставить на конец – мы можем с разбега влететь в большие неприятности. Дело в том, что есть задачи, которые мы можем решить со 100% вероятностью в разумные сроки. CSS-анимации из их числа. Такие задачи даже можно переделегировать менее опытным коллегам в случае нехватки времени. А есть вещи, которые мы вообще не можем решить в технической плоскости. Только в организационной. Не потому, что мы глупые или чего-то не знаем, а потому, что мы работаем в реальном мире, и у пользователей просто может не быть железа, которое вытянет графику того уровня, которую заложили в концепт сайта. И если это обнаруживается в самом конце, перед дедлайном – будет аврал. Заказчик будет сильно недоволен. Если же мы сначала попробовали сделать прототип самой подозрительной в этом плане части, и увидели проблемы, то у нас есть еще дни, а может и недели, чтобы переделать 3D-модели, поменять в каких-то пределах концепцию сайта или сами технологии (отказаться от рендеринга 3D в реальном времени в пользу каких-то других решений например). А уж верстку мы потом доделаем, это не вопрос. В идеальной ситуации мы должны консультировать дизайнеров по вопросам реалистичности концептов еще до их согласования, но, понятное дело, что тут нужен опыт, который появится не сразу. Мы еще будем возвращаться к этому вопросу по мере прохождения курса, а пока – подумайте над тем, что иногда разумнее сначала организовать какие-то процессы, а уже потом решать технические задачи.


### №24 (мысли на подумать, про выбор инструментов)

:point_up: - Мысли на подумать: при работе с анимациями иногда приходится внедрять анимации в какие-то сторонние инструменты. В случае с учебным проектом - это Swiper. Модный слайдер, популярный выбор во многих компаниях. Но. Не всегда сторонние инструменты будут предполагать, что в них будут внедряться анимации с той или иной логикой работы. Например здесь в ТЗ мы сталкиваемся с тем, что нам по идее нужно сделать анимации и появления, и исчезания текстов на слайдах истории (не в этом задании, а вообще). В видео-концепте видно какие там примерно длительности и размах движений по горизонтали. Но если мы попытаемся внедрить именно такие анимации в Swiper - нас ждет разочарование. Мягко говоря. Это очень сложно. Swiper не предполагает, что в него такое будут впихивать. Это тот самый случай, когда написать свой слайдер быстрее, чем внедрить анимации в имеющийся. Отсюда можно вынести мораль: нужно думать при выборе инструментов, и выбирать инструменты, подходящие под задачи. Часто большие и популярные инструменты плохо кастомизируются, это нужно иметь в виду, и заранее анализировать, насколько инструмент подходит или не подходит. Популярность не означает, что инструмент подойдет под конкретные задачи.

