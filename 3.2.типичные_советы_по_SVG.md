# Типичные советы по SVG


Здесь собираются типичные советы по SVG.


## Ситуативные советы.


### Про transform-origin

:point_up: - Свойство transform-origin в CSS не соответствует логическому "transform origin" в SVG. Разные браузеры могут вести себя по-разному при работе с этим свойством. Там долгая история, советую почитать [годную статью по теме](https://css-tricks.com/transforms-on-svg-elements/).


### Про значения в keySplines

:point_up: - Обратите внимание, что значения больше 1 в keySplines не поддерживаются в некоторых современных браузерах (даже в вечнозеленых).


### Про кеш

:point_up: - Обратите внимание, что при перезагрузке страницы SMIL анимации из сторонних картинок не перезапускаются в полном объеме. Это связано с кешированием в браузерах. Загуглите эту тему и постарайтесь решить эту проблему (подсказка: в данном случае придется подключить скрипты для решения проблемы).


### Про кривые и морфинг

:point_up: - Обратите внимание на то, как ломаются контуры при морфинге (это очевидно на примере горы - она не просто складывается, там появляются дополнительные плато, которых быть не должно). Автоматические инструменты для адаптации контуров обычно расставляют точки на простых участках кривых более-менее равномерно, но в нашем случае это ломает логику анимации. Точки на прямой, в которую гора должна превратиться, должны быть строго под изначальными вершинами, а не где-то сбоку от них. В таких ситуациях может быть хорошей идеей подвигать точки своими руками в векторном графическом редакторе (на вкус и цвет они все одинаковые) по направляющим, а не полагаться на автоматику. Это не говоря уже о том, что двигать их мышкой куда удобнее и быстрее, чем пытаться поменять числа прямо в коде. Да и группировка объектов в коде и в графическом редакторе - это небо и земля. Так что если вы хотите много работать с SVG в разных ситуациях - это тот класс инструментов, который определенно стоит взять на вооружение.

:point_up: - Выглядеть передвижение точек на примере горы будет примерно так (в разных редакторах расположение кнопок может отличаться, но суть везде одна и та же):

![](https://habrastorage.org/webt/ga/gz/3n/gagz3n9h6gkpydu5niyx_3jtnti.jpeg)


## Закрепленные советы


### :lock: 3.01 (про альтернативы SMIL)

:heavy_plus_sign: - SMIL - не единственный способ анимирования SVG. Эта технология развивалась вне браузеров и в нашем контексте инструменты разработчика так и не научились нормально с ней взаимодействовать, что может попить немало крови при поиске багов. Но когда картинка встроена в страницу - появляется возможность применить к ней как CSS анимации, так и наши скрипты. В целях развития кругозора будет полезно загуглить эту тему и подумать над тем, в каких ситуациях применение SMIL будет оправдано, а в каких - лучше предпочесть более привычные инструменты из мира фронтенда? Может ли дизайнер экспортировать сцену с такими анимациями сразу в виде SMIL-анимации? А JS? Или может быть там будет что-то смешанное? А каким вообще софтом дизайнер может пользоваться? Можем ли мы сделать морфинг на CSS? А скриптами? Насколько удобно завязать анимации в SVG с типичными для интерфейсов событиями вроде hover, focus и.т.д., если использовать CSS, SMIL или скрипты? Можем ли мы запускать SMIL анимации своими руками в нужное время? Насколько практично использовать SVG в виде отдельной картинки, и что стоит предусмотреть, если мы копируем код множества картинок в саму страницу?

:heavy_plus_sign: - К этому же вопросу: полезно будет узнать о таком инструменте, как [Lottie](https://github.com/airbnb/lottie-web). По всей видимости это самый современный/популярный вариант для работы и анимациями из After Effects в нашем контексте. Для работы в ситуации вендор-лока на Adobe - маст хев.


### :lock: 3.02 (про визуализации данных)

:heavy_plus_sign: - Формат SVG в контексте фронтенда используется не только ради иконок или анимированных сценок. Он также часто всплывает в контексте представления каких-то данных. Разного рода графики и диаграммы, интерактивные карты, планы помещений и.т.д. - в подобных задачах чистого HTML+CSS уже мало, а канвас часто кажется слишком низкоуровневым решением относительно задачи. Мы склоняемся к SVG. Вероятно вы слышали о библиотеке [d3.js](https://d3js.org/) - она в какой-то момент стала популярной именно на почве того, что было сделано много примеров этих самых интерактивных визуализаций с ее использованием. Но готовые решения не всегда подойдут под задачи. Нужно будет действовать самостоятельно. В работе над такими визуализациями могут пригодиться базовые знания по теории вероятностей и статистике, геометрии, понимание того, как работают разные системы координат, как происходит преобразование координат между ними, что такое графы, и что такое кластеризация. Не буду утверждать, что это частые задачи, но понимание принципов их решения может улучшить и понимание некоторых других вещей в нашей отрасли. В этом курсе вам встретятся лишь отдельные моменты, где школьные знания геометрии и тригонометрии будут нужны, но я все же рекомендую постепенно погружаться в тему математики, причем в широком смысле, не только в геометрию. В долгосрочной перспективе это даст гораздо более глубокое понимание того, как работают те или иные штуки в компьютерной графике, и, в частности, на разного рода необычных сайтах. В некоторых проверках у вас будут встречаться ключевые слова, чтобы погуглить - они помогут начать движение в эту сторону.


### :lock: 3.03 (про насмотренность)

:heavy_plus_sign: - Полезно развивать в себе насмотренность, почаще смотреть и анализировать творения других разработчиков. Со временем это начинает помогать в работе, мы видим свои и чужие недочеты в дизайне и анимациях сразу, а не после проверки со стороны (проверять друг друга полезно, но в реальном мире не всегда будет кому проверить вашу работу). И даже если вам кажется, что все уже хорошо - останавливаться не стоит. Много интересных примеров сайтов можно найти в каталогах [Awwwards](https://www.awwwards.com/), [CSS Design Awards](https://cssdesignawards.com/) и [FWA](https://thefwa.com/). Если вы еще не пытались анализировать происходящее на подобных сайтах - сейчас самое время попробовать.


### :lock: 3.04 (про Leader Line, триангуляцию и мозаику Вороного)

:heavy_plus_sign: - По теме SVG будет полезно дополнительно познакомиться с библиотекой [Leader Line](https://anseki.github.io/leader-line/), если вы еще не знакомы. В учебном проекте все нужно делать без использования сторонних библиотек, но это популярный инструмент, про который стоит знать.

:heavy_plus_sign: - Для общего развития, в том числе по теме SVG, но больше по математике - будет полезно почитать [статью про SVG-плейсхолдеры](https://habr.com/ru/post/431232/) и узнать из нее про триангуляцию и мозаику Вороного. Эти алгоритмы часто проявляются в креативной фронтенд-разработке, и если вы движетесь в эту сторону - то знать про них определенно стоит.

