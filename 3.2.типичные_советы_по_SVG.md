# Типичные советы по SVG

Здесь собираются типичные советы по SVG. Нумерация - в порядке появления. В начале совета - палец или плюс. Советы дополняют ревью, но не являются основанием для отправки задания на доработку, если все работает так, как и должно. Это делается, чтобы не сильно демотивировать студентов - ошибки, описываемые здесь, можно поправить позже (особенно если студент приходит к одному наставнику и есть возможность следить за процессом). Про соответствие базовым критериям см. `4.базовые_критерии`.


### №1 (про transform-origin)

:point_up: - Свойство transform-origin в CSS не соответствует логическому "transform origin" в SVG. Разные браузеры могут вести себя по-разному при работе с этим свойством. Там долгая история, советую почитать [годную статью по теме](https://css-tricks.com/transforms-on-svg-elements/).


### №2 (про значения в keySplines)

:point_up: - Обратите внимание, что значения больше 1 в keySplines не поддерживаются в некоторых современных браузерах (даже в вечнозеленых).


### №3 (про кроссбраузерность, к критерию Б5)

:point_up: - При работе с SVG очень важно обращать внимание на кроссбраузерность. Даже современные браузеры имеют разные взгляды на то, как это все должно работать. Особенное внимание стоит уделить Firefox - в нем вы быстро найдете все основные проблемы, которые есть в вашем коде.


### №4 (про кеш)

:point_up: - Обратите внимание, что при перезагрузке страницы SMIL анимации из сторонних картинок не перезапускаются в полном объеме. Это связано с кешированием в браузерах. Загуглите эту тему и постарайтесь решить эту проблему (подсказка: в данном случае придется подключить скрипты для решения проблемы).


### №5 (про кривые и морфинг)

:point_up: - Обратите внимание на то, как ломаются контуры при морфинге (это очевидно на примере горы - она не просто складывается, там появляются дополнительные плато, которых быть не должно). Автоматические инструменты для адаптации контуров обычно расставляют точки на простых участках кривых более-менее равномерно, но в нашем случае это ломает логику анимации. Точки на прямой, в которую гора должна превратиться, должны быть строго под изначальными вершинами, а не где-то сбоку от них. В таких ситуациях может быть хорошей идеей подвигать точки своими руками в векторном графическом редакторе (на вкус и цвет они все одинаковые) по направляющим, а не полагаться на автоматику. Это не говоря уже о том, что двигать их мышкой куда удобнее и быстрее, чем пытаться поменять числа прямо в коде. Да и группировка объектов в коде и в графическом редакторе - это небо и земля. Так что если вы хотите много работать с SVG в разных ситуациях - это тот класс инструментов, который определенно стоит взять на вооружение.

:point_up: - Выглядеть передвижение точек на примере горы будет примерно так (в разных редакторах расположение кнопок может отличаться, но суть везде одна и та же):

![](https://habrastorage.org/webt/ga/gz/3n/gagz3n9h6gkpydu5niyx_3jtnti.jpeg)


### №6 (про Leader Line)

:heavy_plus_sign: - По теме SVG будет полезно дополнительно познакомиться с библиотекой [Leader Line](https://anseki.github.io/leader-line/), если вы еще не знакомы. В учебном проекте все нужно делать без использования сторонних библиотек, но это популярный инструмент, про который стоит знать.


### №7 (про альтернативы SMIL)

:heavy_plus_sign: - SMIL - не единственный способ анимирования SVG. Эта технология развивалась вне браузеров и в нашем контексте инструменты разработчика так и не научились нормально с ней взаимодействовать, что может попить немало крови при поиске багов. Но когда картинка встроена в страницу - появляется возможность применить к ней как CSS анимации, так и наши скрипты. В целях развития кругозора будет полезно загуглить эту тему и подумать над тем, в каких ситуациях применение SMIL будет оправдано, а в каких - лучше предпочесть более привычные инструменты из мира фронтенда? Может ли дизайнер экспортировать сцену с такими анимациями сразу в виде SMIL-анимации? А JS? Или может быть там будет что-то смешанное? А каким вообще софтом дизайнер может пользоваться? Можем ли мы сделать морфинг на CSS? А скриптами? Насколько удобно завязать анимации в SVG с типичными для интерфейсов событиями вроде hover, focus и.т.д., если использовать CSS, SMIL или скрипты? Можем ли мы запускать SMIL анимации своими руками в нужное время? Насколько практично использовать SVG в виде отдельной картинки, и что стоит предусмотреть, если мы копируем код множества картинок в саму страницу?

:heavy_plus_sign: - К этому же вопросу: полезно будет узнать о таком инструменте, как [Lottie](https://github.com/airbnb/lottie-web). По всей видимости это самый современный/популярный вариант для работы и анимациями из After Effects в нашем контексте. Для работы в ситуации вендор-лока на Adobe - маст хев.


### №8 (про триангуляцию и мозаику Вороного)

:heavy_plus_sign: - Для общего развития, в том числе по теме SVG, но больше по математике - будет полезно почитать [статью про SVG-плейсхолдеры](https://habr.com/ru/post/431232/) и узнать из нее про триангуляцию и мозаику Вороного. Эти алгоритмы часто проявляются в креативной фронтенд-разработке, и если вы движетесь в эту сторону - то знать про них определенно стоит.


### №9 (про визуализации данных)

:heavy_plus_sign: - Формат SVG в контексте фронтенда используется не только ради иконок или анимированных сценок. Он также часто всплывает в контексте представления каких-то данных. Разного рода графики и диаграммы, интерактивные карты, планы помещений и.т.д. - в подобных задачах чистого HTML+CSS уже мало, а канвас часто кажется слишком низкоуровневым решением относительно задачи. Мы склоняемся к SVG. Вероятно вы слышали о библиотеке [d3.js](https://d3js.org/) - она в какой-то момент стала популярной именно на почве того, что было сделано много примеров этих самых интерактивных визуализаций с ее использованием. Но готовые решения не всегда подойдут под задачи. Будет полезно продолжить свое изучение математики. В работе над такими визуализациями могут пригодиться базовые знания по теории вероятностей и статистике, понимание того, как работают разные системы координат, как происходит преобразование координат между ними, и что такое кластеризация. Не буду утверждать, что это частые задачи, но понимание принципов их решения может улучшить и понимание некоторых других вещей в нашей отрасли.

