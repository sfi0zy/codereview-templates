# Типичные советы по SVG


Здесь собираются типичные советы по SVG.


## Базовые критерии

### Б5

:red_circle: - Анимация должна идентично отображаться в последних версиях браузеров (критерий Б5).

:point_up: - При работе с SVG очень важно обращать внимание на кроссбраузерность. Даже современные браузеры имеют разные взгляды на то, как это все должно работать. Особенное внимание стоит уделить Firefox - в нем вы быстро найдете все основные проблемы, которые есть в вашем коде.


## Ситуативные советы.


### Про transform-origin

:point_up: - Свойство transform-origin в CSS не соответствует логическому "transform origin" в SVG. Разные браузеры могут вести себя по-разному при работе с этим свойством. Там долгая история, советую почитать [годную статью по теме](https://css-tricks.com/transforms-on-svg-elements/).


### Про значения в keySplines

:point_up: - Обратите внимание, что значения больше 1 в keySplines не поддерживаются в некоторых современных браузерах (даже в вечнозеленых).


### Про кеш

:point_up: - Обратите внимание, что при перезагрузке страницы SMIL анимации из сторонних картинок не перезапускаются в полном объеме. Это связано с кешированием в браузерах. Загуглите эту тему и постарайтесь решить эту проблему (подсказка: в данном случае придется подключить скрипты для решения проблемы).


### Про кривые и морфинг

:point_up: - Обратите внимание на то, как ломаются контуры при морфинге (это очевидно на примере горы - она не просто складывается, там появляются дополнительные плато, которых быть не должно). Автоматические инструменты для адаптации контуров обычно расставляют точки на простых участках кривых более-менее равномерно, но в нашем случае это ломает логику анимации. Точки на прямой, в которую гора должна превратиться, должны быть строго под изначальными вершинами, а не где-то сбоку от них. В таких ситуациях может быть хорошей идеей подвигать точки своими руками в векторном графическом редакторе, а не полагаться на автоматику. На вкус и цвет они все одинаковые, я обычно использую [Inkscape](https://inkscape.org/). Выглядеть передвижение точек на примере горы будет примерно так (в разных редакторах расположение кнопок может отличаться, но суть везде одна и та же):

![](https://habrastorage.org/webt/ga/gz/3n/gagz3n9h6gkpydu5niyx_3jtnti.jpeg)

:point_up: - И если так получилось, что вы совсем не работали с векторными графическими редакторами, то это тот самый момент, когда стоит попробовать. Группировка объектов, подготовка контуров для морфинга, очистка SVG от мусора и.т.д. - многие вещи натыкать мышкой там куда проще, чем что-то изобретать в коде в своей IDE.


## Закрепленные советы


### :lock: 3.01 (про альтернативы SMIL)

:heavy_plus_sign: - SMIL - не единственный способ анимирования SVG. Эта технология развивалась вне браузеров и в нашем контексте инструменты разработчика так и не научились нормально с ней взаимодействовать. Пока все идет по плану - технология выглядит неплохо, но как только что-то идет не так - выясняется, что искать и исправлять проблемы долго и неприятно. Но когда картинка встроена в страницу - появляется возможность применить к ней как CSS анимации, так и наши скрипты. В целях развития кругозора будет полезно загуглить эту тему и подумать над тем, в каких ситуациях применение SMIL будет оправдано, а в каких лучше предпочесть более привычные инструменты из мира фронтенда.

:heavy_plus_sign: - И к этому же вопросу: полезно будет узнать о таком дополнительном инструменте, как [Lottie](https://github.com/airbnb/lottie-web). По всей видимости это самый современный/популярный вариант для работы с заранее заготовленными анимациями из After Effects в нашем контексте. Он помогает автоматизировать перенос анимаций в веб, что существенно экономит время и бюджет на разработку.

:heavy_plus_sign: - Ну и в целом, если вы нацелены на использование SVG в работе, то я бы посоветовал в процессе прохождения курса почитать [мое введение в SVG анимации](https://habr.com/ru/post/667116/). Там почти без кода, больше про разные инструменты и подходы к работе. Эта статья дополняет учебник, получается что-то вроде взгляда с другой стороны на практическое применение SVG во фронтенде.


### :lock: 3.02 (про визуализации данных)

:heavy_plus_sign: - Формат SVG в контексте фронтенда используется не только ради иконок или анимированных сценок. Он также часто всплывает в контексте представления каких-то данных. Разного рода графики и диаграммы, интерактивные карты, планы помещений и.т.д. - в подобных задачах чистого HTML+CSS уже мало, а канвас часто кажется слишком низкоуровневым решением относительно задачи. Мы склоняемся к SVG. Вероятно вы слышали о библиотеке [d3.js](https://d3js.org/) - она в какой-то момент стала популярной именно на почве того, что было сделано много примеров этих самых интерактивных визуализаций с ее использованием. Но готовые решения не всегда подойдут под задачи. Нужно будет действовать самостоятельно. В работе над такими визуализациями могут пригодиться базовые знания по статистике и теории вероятностей (чтобы понимать суть ТЗ, когда речь идет о представлении данных), и вычислительной геометрии (ради подходов к решению задач). Чем больше мы будем углубляться в сторону WebGL, тем сильнее будет нужен кругозор в области компьютерной графики в целом. Он очень помогает декомпозировать задачи на более простые. В некоторых проверках у вас будут встречаться ключевые слова, чтобы погуглить - они помогут начать движение в нужную сторону. Ну и википедию никто не отменял.


### :lock: 3.03 (про насмотренность)

:heavy_plus_sign: - Думаю не стоит говорить, что полезно развивать в себе насмотренность, почаще смотреть и анализировать творения других разработчиков. Со временем это начинает помогать в работе, мы видим свои и чужие недочеты в дизайне и анимациях сразу, а не после проверки со стороны. Да и можно идей каких-то набрать в процессе анализа. Много интересных примеров сайтов можно найти в каталогах [Awwwards](https://www.awwwards.com/), [CSS Design Awards](https://cssdesignawards.com/) и [FWA](https://thefwa.com/). Если вы еще не пытались анализировать происходящее на подобных сайтах - сейчас самое время попробовать. Многие вещи там строятся на базе простых по сути CSS и SVG-анимаций, которые вы уже умеете делать.


### :lock: 3.04 (про линии, Leader Line, триангуляцию и мозаику Вороного)

:heavy_plus_sign: - Рисование линий с помощью stroke-dasharray/stoke-dashoffset не обязательно ограничивать заранее заготовленными анимациями. Часто можно завязать их на действия пользователя, например на скролл, как [в этом примере](https://codepen.io/sfi0zy/pen/wVJBGB). Идея сама по себе простая, но применяется очень часто в самых разных сочетаниях с дополнительными CSS-анимациями. Стоит взять на заметку.

:heavy_plus_sign: - По теме SVG будет полезно дополнительно познакомиться с библиотекой [Leader Line](https://anseki.github.io/leader-line/), если вы еще не знакомы. В учебном проекте все нужно делать без использования сторонних библиотек (да и оно тут не к месту), но это популярный инструмент, про который стоит знать.

:heavy_plus_sign: - Для общего развития, в том числе по теме SVG, но больше по математике - будет полезно загуглить про алгоритмы, связанные с разбиением плоскости. В частности про триангуляцию Делоне и мозаику Вороного. Эти алгоритмы часто проявляются в креативной фронтенд-разработке в самых разных местах, и если вы движетесь в эту сторону - то знать про них определенно стоит. Как простой пример того, что из них можно сделать в рамках SVG - [плейсхолдеры](https://habr.com/ru/post/431232/).


